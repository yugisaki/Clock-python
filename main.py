"""
Init the display
"""
import drivers

epd = drivers.EPD_2in9()
epd.init()
epd.fill(0xff)
epd.display_Base(epd.buffer)

img = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 240, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 254, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 31, 128, 1, 128, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 12, 3, 128, 1, 207, 128, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 1, 224, 7, 255, 128, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 32, 71, 191, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 248, 48, 239, 126, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 252, 9, 239, 252, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 255, 5, 239, 248, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 14, 7, 130, 239, 248, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 227, 127, 248, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 63, 249, 255, 240, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 223, 252, 255, 240, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 240, 63, 159, 224, 0, 31, 248, 0, 0, 0, 0, 0, 0, 0, 3, 0, 7, 135, 240, 0, 112, 31, 128, 0, 0, 0, 0, 0, 0, 6, 0, 3, 195, 248, 0, 240, 15, 208, 0, 0, 0, 0, 0, 0, 4, 7, 128, 240, 63, 131, 192, 1, 248, 0, 0, 0, 0, 0, 0, 4, 0, 112, 120, 1, 226, 48, 0, 14, 0, 0, 0, 0, 0, 0, 0, 64, 28, 63, 192, 103, 255, 255, 1, 224, 0, 0, 0, 0, 0, 24, 96, 7, 15, 255, 156, 0, 255, 252, 254, 0, 0, 0, 0, 0, 30, 248, 1, 225, 255, 152, 31, 255, 255, 255, 192, 0, 0, 0, 0, 28, 236, 0, 252, 7, 48, 63, 255, 255, 255, 224, 0, 0, 0, 0, 27, 199, 0, 127, 143, 49, 240, 0, 15, 255, 248, 0, 0, 0, 0, 27, 195, 128, 51, 255, 63, 224, 0, 15, 255, 255, 0, 0, 0, 0, 23, 0, 224, 14, 24, 252, 7, 255, 248, 31, 255, 192, 0, 0, 0, 6, 0, 224, 3, 225, 129, 255, 255, 255, 241, 255, 248, 0, 0, 0, 12, 1, 128, 192, 0, 31, 255, 255, 255, 255, 31, 252, 0, 0, 0, 24, 1, 128, 16, 0, 255, 255, 255, 255, 255, 255, 255, 0, 0, 0, 16, 3, 63, 136, 15, 255, 243, 128, 1, 255, 255, 255, 128, 0, 0, 23, 3, 63, 224, 127, 255, 243, 0, 1, 255, 255, 255, 192, 0, 0, 4, 195, 127, 225, 255, 255, 140, 0, 127, 7, 255, 255, 224, 0, 0, 4, 114, 255, 199, 248, 226, 16, 7, 255, 255, 255, 255, 240, 0, 0, 4, 26, 255, 223, 227, 152, 32, 15, 255, 255, 131, 255, 240, 0, 0, 0, 196, 127, 61, 134, 96, 199, 0, 63, 255, 252, 63, 248, 0, 0, 0, 0, 0, 123, 12, 192, 30, 0, 0, 255, 255, 15, 248, 0, 0, 28, 1, 0, 114, 25, 128, 125, 193, 254, 31, 255, 199, 252, 0, 0, 14, 3, 254, 196, 25, 131, 255, 224, 255, 31, 255, 227, 252, 224, 0, 0, 67, 135, 132, 17, 7, 255, 248, 127, 112, 127, 241, 248, 240, 0, 0, 241, 141, 0, 0, 15, 188, 0, 127, 127, 207, 249, 251, 56, 0, 0, 248, 205, 24, 64, 31, 248, 0, 127, 127, 248, 248, 127, 24, 0, 0, 248, 227, 0, 0, 63, 178, 0, 113, 255, 255, 156, 127, 12, 0, 2, 248, 96, 68, 224, 127, 246, 24, 32, 3, 255, 30, 63, 6, 0, 19, 196, 0, 127, 24, 127, 190, 25, 152, 0, 31, 231, 63, 6, 0, 5, 216, 27, 63, 112, 255, 254, 1, 103, 255, 227, 243, 31, 131, 0, 6, 156, 255, 184, 8, 255, 246, 3, 192, 127, 254, 125, 159, 131, 0, 31, 63, 31, 176, 1, 255, 248, 14, 63, 254, 127, 156, 159, 131, 0, 31, 190, 159, 182, 3, 255, 255, 252, 255, 255, 255, 238, 79, 131, 0, 31, 142, 155, 133, 3, 255, 255, 249, 207, 255, 207, 227, 79, 131, 0, 31, 122, 73, 152, 195, 255, 255, 255, 247, 255, 252, 255, 15, 131, 0, 31, 127, 0, 32, 7, 255, 255, 254, 57, 255, 254, 125, 159, 131, 0, 30, 127, 158, 96, 103, 251, 239, 253, 31, 255, 255, 255, 191, 7, 0, 30, 56, 179, 0, 71, 255, 255, 253, 143, 63, 255, 254, 127, 15, 0, 31, 60, 49, 0, 207, 255, 255, 254, 227, 240, 127, 255, 255, 14, 0, 31, 255, 159, 0, 207, 255, 255, 255, 112, 255, 243, 255, 254, 192, 0, 31, 255, 0, 64, 111, 255, 255, 255, 184, 31, 251, 255, 253, 192, 0, 27, 224, 72, 64, 103, 251, 255, 255, 204, 15, 255, 255, 231, 192, 0, 27, 30, 91, 48, 103, 251, 255, 255, 231, 240, 127, 255, 62, 192, 0, 15, 124, 155, 24, 35, 253, 255, 255, 249, 255, 252, 121, 252, 192, 0, 24, 124, 27, 152, 51, 255, 255, 243, 254, 31, 255, 241, 252, 192, 0, 23, 125, 63, 172, 49, 255, 255, 249, 159, 131, 255, 135, 249, 192, 0, 1, 120, 255, 182, 25, 255, 254, 0, 255, 252, 255, 255, 251, 192, 0, 29, 180, 127, 57, 1, 255, 252, 0, 127, 190, 192, 255, 243, 192, 0, 3, 140, 3, 125, 128, 255, 249, 128, 47, 191, 143, 255, 247, 192, 0, 3, 252, 0, 126, 64, 255, 247, 12, 47, 191, 159, 253, 231, 128, 0, 1, 248, 103, 254, 32, 127, 255, 12, 63, 190, 127, 251, 239, 128, 0, 0, 248, 236, 135, 144, 127, 255, 0, 63, 187, 254, 243, 223, 128, 0, 0, 241, 206, 121, 152, 63, 187, 128, 63, 199, 252, 239, 63, 0, 0, 0, 115, 131, 30, 104, 31, 184, 0, 63, 63, 243, 207, 63, 1, 128, 0, 3, 129, 135, 142, 15, 220, 8, 126, 63, 207, 60, 255, 3, 128, 0, 3, 255, 3, 227, 7, 255, 248, 248, 252, 31, 187, 254, 7, 96, 0, 12, 0, 64, 241, 129, 127, 240, 243, 241, 249, 187, 254, 28, 96, 0, 63, 0, 108, 120, 224, 31, 129, 231, 128, 141, 128, 252, 114, 128, 7, 192, 14, 126, 62, 120, 51, 195, 152, 6, 62, 72, 1, 143, 128, 28, 4, 3, 191, 143, 156, 56, 0, 3, 134, 28, 199, 251, 137, 128, 0, 4, 255, 239, 195, 255, 31, 0, 7, 127, 206, 113, 243, 49, 0, 0, 6, 255, 255, 193, 255, 207, 255, 255, 63, 254, 112, 7, 99, 0, 16, 6, 127, 243, 134, 31, 243, 255, 255, 191, 159, 49, 252, 147, 0, 8, 98, 127, 251, 131, 15, 252, 127, 255, 223, 191, 60, 121, 14, 0, 12, 67, 127, 253, 3, 1, 255, 227, 255, 223, 191, 206, 28, 54, 0, 6, 25, 191, 253, 0, 128, 31, 255, 255, 153, 255, 142, 0, 108, 0, 6, 113, 191, 248, 0, 112, 3, 255, 255, 130, 60, 7, 128, 140, 0, 19, 97, 191, 224, 24, 15, 3, 255, 255, 247, 193, 231, 192, 136, 0, 9, 129, 159, 192, 224, 3, 255, 255, 25, 254, 31, 227, 96, 230, 0, 4, 1, 192, 3, 200, 0, 199, 240, 7, 224, 255, 192, 144, 102, 0, 23, 0, 192, 78, 17, 224, 72, 3, 254, 1, 255, 200, 128, 19, 0, 19, 0, 224, 188, 55, 240, 60, 7, 248, 3, 255, 8, 6, 3, 0, 27, 128, 243, 128, 252, 30, 64, 124, 0, 31, 126, 17, 6, 0, 128, 29, 192, 112, 3, 255, 253, 195, 128, 0, 57, 124, 50, 217, 224, 128, 28, 224, 96, 15, 143, 240, 15, 191, 225, 225, 240, 37, 143, 252, 128, 30, 96, 64, 28, 127, 255, 143, 207, 247, 199, 192, 39, 156, 7, 192, 31, 113, 128, 113, 255, 255, 203, 63, 248, 30, 0, 105, 240, 0, 96, 28, 103, 0, 199, 255, 240, 55, 63, 249, 240, 0, 75, 224, 0, 0, 28, 126, 7, 135, 255, 224, 239, 25, 222, 0, 0, 215, 0, 0, 0, 0, 124, 30, 63, 255, 15, 200, 15, 223, 0, 0, 184, 0, 0, 0, 0, 48, 124, 255, 254, 127, 8, 63, 159, 0, 0, 240, 0, 0, 0, 0, 33, 240, 255, 112, 240, 0, 115, 255, 0, 0, 0, 0, 0, 0, 8, 7, 135, 253, 227, 128, 0, 54, 255, 128, 0, 0, 0, 0, 0, 12, 0, 31, 247, 195, 0, 0, 31, 255, 192, 0, 0, 0, 0, 0, 15, 0, 127, 239, 204, 0, 0, 29, 223, 224, 0, 0, 0, 0, 0, 7, 192, 255, 207, 160, 0, 0, 63, 223, 240, 0, 0, 0, 0, 0, 3, 227, 255, 223, 32, 0, 0, 31, 255, 248, 0, 0, 0, 0, 0, 16, 127, 255, 60, 224, 0, 0, 3, 191, 252, 0, 0, 0, 0, 0, 24, 7, 222, 121, 240, 0, 0, 3, 191, 255, 0, 0, 0, 0, 0, 28, 15, 216, 119, 248, 0, 0, 3, 159, 255, 128, 0, 0, 0, 0, 15, 254, 240, 255, 248, 0, 0, 1, 222, 255, 128, 0, 0, 0, 0, 7, 243, 224, 239, 252, 0, 0, 0, 223, 127, 224, 0, 0, 0, 0, 0, 243, 129, 239, 252, 0, 0, 0, 15, 159, 224, 0, 0, 0, 0, 24, 62, 3, 207, 254, 0, 0, 0, 15, 135, 0, 0, 0, 0, 0, 7, 192, 7, 71, 191, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 7, 115, 207, 128, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 17, 199, 128, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 30, 0, 192, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 64, 60, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 48, 56, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 15, 224, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 7, 192, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 252, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
img_h = 180
img_w = 120
try:
    # Network
    import network, time, framebuf
    
    ssid = "You wifi name"
    password = "your wifi password"

    wlan = network.WLAN(network.STA_IF)
    wlan.active(True)
    wlan.connect(ssid,password)

    time.sleep(.2)
    for i in range(100):
        if wlan.isconnected():
            break
        else:
            time.sleep(.2)
    else:
        5 / 0 # couses program to cresh i dont know other ways xd

    import ntptime, time # set time server
    try:
        ntptime.host = "pool.ntp.org"
        ntptime.settime()
    except:
        pass

    epd.text("clock-py",35,10,0x00)
    epd.display_Partial(epd.buffer)

    mode = 0

    while (True):
        input = drivers.scan()

        if (input == 3):
            mode = 2

        if (mode == 0):
            current_time = time.localtime()
            year, month, day, hour, minute, sec, milsec, nanosec = current_time 

            # write buffer
            epd.text(f"h: {hour + 1}",15,75,0x00)
            epd.text(f"min: min:{minute}",15,75+12,0x00)
            epd.text(f"sec: {sec}",15,75+12+12,0x00)
            epd.display_Partial(epd.buffer)

            # reset buffer
            epd.text(f"h: {hour + 1}",15,75,0xff)
            epd.text(f"min: min:{minute}",15,75+12,0xff)
            epd.text(f"sec: {sec}",15,75+12+12,0xff)

        if (mode == 2):
            break
                
finally:
   epd.fill(0x00)
   epd.blit(framebuf.FrameBuffer(bytearray(img),img_w,img_h,framebuf.MONO_HLSB),(drivers.EPD_WIDTH - img_w)//2,(drivers.EPD_HEIGHT - img_h)//2)
   epd.display_Base(epd.buffer)